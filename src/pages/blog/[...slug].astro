---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { Navigation } from '../../components/Navigation';
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

export async function getStaticPaths() {
  const blogPosts = await getCollection('blog');
  return blogPosts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

type Props = {
  post: CollectionEntry<'blog'>;
};

const { post } = Astro.props;
const { Content } = await post.render();
---

<BaseLayout title={`${post.data.title} | Humanyl Blog`} description={post.data.description}>
  <div class="min-h-screen bg-white">
    <Navigation client:load />
    
    <article class="pt-32 pb-24 px-6 md:px-16">
      <div class="max-w-3xl mx-auto">
        <header class="mb-12">
          <a 
            href="/blog"
            class="inline-flex items-center gap-2 text-[#6b7280] hover:text-[#2CACE8] transition-colors duration-300 mb-8"
            style="font-family: 'Instrument Sans', sans-serif; font-size: 0.875rem;"
          >
            ← Back to Blog
          </a>
          
          <time 
            class="text-[#6b7280] text-sm mb-4 block"
            style="font-family: 'Instrument Sans', sans-serif;"
          >
            {post.data.pubDate.toLocaleDateString('en-US', { 
              year: 'numeric', 
              month: 'long', 
              day: 'numeric' 
            })}
            {post.data.updatedDate && (
              <span class="ml-2">
                (Updated {post.data.updatedDate.toLocaleDateString('en-US', { 
                  year: 'numeric', 
                  month: 'long', 
                  day: 'numeric' 
                })})
              </span>
            )}
          </time>
          
          <h1 
            class="text-[#0F1113] mb-6"
            style="font-family: 'Instrument Serif', Georgia, serif; font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 400; line-height: 1.1; letter-spacing: -0.02em;"
          >
            {post.data.title}
          </h1>
          
          <p 
            class="text-[#6b7280] text-lg mb-6"
            style="font-family: 'Instrument Sans', sans-serif; line-height: 1.6;"
          >
            {post.data.description}
          </p>
          
          <div class="flex items-center gap-4 flex-wrap">
            <span 
              class="text-[#6b7280] text-sm"
              style="font-family: 'Instrument Sans', sans-serif;"
            >
              By {post.data.author}
            </span>
            
            {post.data.tags && post.data.tags.length > 0 && (
              <div class="flex flex-wrap gap-2">
                {post.data.tags.map((tag) => (
                  <span 
                    class="px-3 py-1 rounded-full text-xs bg-[#2CACE8]/10 text-[#2CACE8]"
                    style="font-family: 'Instrument Sans', sans-serif;"
                  >
                    {tag}
                  </span>
                ))}
              </div>
            )}
          </div>
        </header>

        <div 
          class="prose prose-lg max-w-none"
          style="font-family: 'Instrument Sans', sans-serif;"
        >
          <Content />
        </div>

        <footer class="mt-16 pt-8 border-t border-[#e5e5e5]">
          <a 
            href="/blog"
            class="inline-flex items-center gap-2 text-[#2CACE8] hover:text-[#2CACE8]/80 transition-colors duration-300"
            style="font-family: 'Instrument Sans', sans-serif; font-weight: 500;"
          >
            ← Back to Blog
          </a>
        </footer>
      </div>
    </article>
  </div>
</BaseLayout>

<style>
  .prose {
    color: #0F1113;
  }
  
  .prose h2 {
    font-family: 'Instrument Serif', Georgia, serif;
    font-size: clamp(1.5rem, 3vw, 2rem);
    font-weight: 400;
    line-height: 1.2;
    letter-spacing: -0.01em;
    color: #0F1113;
    margin-top: 2rem;
    margin-bottom: 1rem;
  }
  
  .prose h3 {
    font-family: 'Instrument Serif', Georgia, serif;
    font-size: clamp(1.125rem, 2vw, 1.5rem);
    font-weight: 400;
    line-height: 1.3;
    letter-spacing: -0.01em;
    color: #0F1113;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  .prose p {
    font-family: 'Instrument Sans', sans-serif;
    font-size: clamp(0.9375rem, 1.5vw, 1.125rem);
    line-height: 1.6;
    color: #0F1113;
    margin-bottom: 1.25rem;
  }
  
  .prose ul,
  .prose ol {
    font-family: 'Instrument Sans', sans-serif;
    font-size: clamp(0.9375rem, 1.5vw, 1.125rem);
    line-height: 1.6;
    color: #0F1113;
    margin-bottom: 1.25rem;
    padding-left: 1.5rem;
  }
  
  .prose li {
    margin-bottom: 0.5rem;
  }
  
  .prose a {
    color: #2CACE8;
    text-decoration: underline;
    text-underline-offset: 2px;
  }
  
  .prose a:hover {
    color: #2CACE8;
    opacity: 0.8;
  }
  
  .prose strong {
    font-weight: 500;
    color: #0F1113;
  }
  
  .prose code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    font-size: 0.875em;
    background-color: #f3f4f6;
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    color: #0F1113;
  }
  
  .prose pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    background-color: #f3f4f6;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin-bottom: 1.25rem;
  }
  
  .prose blockquote {
    border-left: 4px solid #2CACE8;
    padding-left: 1rem;
    margin-left: 0;
    margin-right: 0;
    font-style: italic;
    color: #6b7280;
  }
</style>


